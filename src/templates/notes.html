{% extends "base.html" %}

{% block title %}Notes | Luca Bolognese{% endblock %}

{% block content %}
    <h1>Notes</h1>
    
    {% set years = {} %}
    {% for post in posts %}
        {% set year = post.date.strftime('%Y') %}
        {% if year not in years %}
            {% set _ = years.update({year: []}) %}
        {% endif %}
        {% set _ = years[year].append(post) %}
    {% endfor %}
    
    {% for year in years|sort(reverse=true) %}
        <h2 class="year">{{ year }}</h2>
        <ul class="posts-list">
            {% for post in years[year] %}
                <li>
                    <a href="{{ post.url }}">{{ post.title }}</a>
                    {% if post.has_translation %}
                    <span class="lang-toggle-inline">
                        {% if post.language == 'it' %}
                        [<a href="/{{ post.url }}"><strong>IT</strong></a> | <a href="{{ post.translation_url }}">EN (AI)</a>]
                        {% else %}
                        [<a href="/{{ post.url }}"><strong>EN</strong></a> | <a href="{{ post.translation_url }}">IT (AI)</a>]
                        {% endif %}
                    </span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% endfor %}
{% endblock %}
